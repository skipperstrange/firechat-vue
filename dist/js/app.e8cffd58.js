(function(t){function e(e){for(var s,i,r=e[0],c=e[1],u=e[2],l=0,f=[];l<r.length;l++)i=r[l],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&f.push(n[i][0]),n[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);d&&d(e);while(f.length)f.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],s=!0,i=1;i<a.length;i++){var c=a[i];0!==n[c]&&(s=!1)}s&&(o.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},n={app:0},o=[];function i(t){return r.p+"js/"+({about:"about"}[t]||t)+"."+{about:"37c964a0","chunk-3cdec8e8":"5fdc4bdd"}[t]+".js"}function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(t){var e=[],a=n[t];if(0!==a)if(a)e.push(a[2]);else{var s=new Promise((function(e,s){a=n[t]=[e,s]}));e.push(a[2]=s);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=i(t);var u=new Error;o=function(e){c.onerror=c.onload=null,clearTimeout(l);var a=n[t];if(0!==a){if(a){var s=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",u.name="ChunkLoadError",u.type=s,u.request=o,a[1](u)}n[t]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(e)},r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var d=u;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"29c9":function(t,e,a){"use strict";a("65e5")},4184:function(t,e,a){t.exports=a.p+"img/firebase-logo.c24b6b9c.png"},"45ea":function(t,e,a){},"4ffd":function(t,e,a){t.exports=a.p+"img/logo.82b9c7a5.png"},"56d7":function(t,e,a){"use strict";a.r(e),a.d(e,"eventBus",(function(){return Rt}));a("e260"),a("e6cf"),a("cca6"),a("a79d");var s,n,o=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("link",{attrs:{rel:"stylesheet",href:"https://use.fontawesome.com/releases/v5.2.0/css/all.css",integrity:"sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ",crossorigin:"anonymous"}}),a("transition",{attrs:{mode:"out-in","enter-active-class":"animate__animated animate__fadeIn","leave-active-class":"animate__animated animate__fadeOut"}},[a("router-view")],1)],1)},r=[],c=(a("45ea"),a("b1bf"),a("973c"),{methods:{},mounted:function(){this.$store.dispatch("authCheck")}}),u=c,l=(a("034f"),a("2877")),d=Object(l["a"])(u,i,r,!1,null,null,null),f=d.exports,m=(a("d3b7"),a("3ca3"),a("ddb0"),a("8c4f")),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("BackgroundEffects"),a("div",{staticClass:"caption center-block text-center"},[t._m(0),a("h3",[t._v("Fire Chat Vue")]),a("p",{staticClass:"mb-3"},[t._v("A demo chat application using firebase and vuejs. Docs will be published soon. ")]),t._m(1),a("router-link",{staticClass:"btn btn-success",attrs:{to:"/auth"}},[t._v("Sign In")]),t._v(" | "),a("router-link",{staticClass:"btn btn-info",attrs:{to:{name:"Auth",query:{loginState:"reg"}}}},[t._v("Sign Up")])],1)],1)},p=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"logos"},[s("img",{attrs:{src:a("4ffd"),alt:""}}),s("img",{attrs:{src:a("4184"),alt:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"mb-2"},[a("a",{staticClass:"badge badge-pill badge-dark",attrs:{href:"https://github.com/skipperstrange/firechat-vue"}},[t._v(" Visit repo on github ")])])}],g=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},b=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"landing"},[a("div",{staticClass:"home-wrap"},[a("div",{staticClass:"home-inner"})])])])}],v={name:"BackgroundEffects"},_=v,y=Object(l["a"])(_,g,b,!1,null,null,null),w=y.exports,S={name:"Home",components:{BackgroundEffects:w}},C=S,k=(a("cccb"),Object(l["a"])(C,h,p,!1,null,null,null)),E=k.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("BackgroundEffects"),a("div",{attrs:{id:"frame"}},[a("users-list"),a("chat-window")],1)],1)},$=[],x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return!0===t.active?a("div",{staticClass:"content"},[a("div",{staticClass:"contact-profile container"},[a("img",{attrs:{src:t.buddy.photoURL,alt:""}}),a("p",[t._v(t._s(t.buddy.displayName))]),0==t.buddy.blocked?a("span",{staticClass:"ban",attrs:{title:"Block this contact."}},[a("a",{on:{click:function(e){return t.blockContact(t.buddy)}}},[a("i",{staticClass:"fa fa-ban"})])]):t._e(),1==t.buddy.blocked?a("span",{staticClass:"ban",staticStyle:{color:"red"},attrs:{title:"Unblock this contact."}},[a("a",{on:{click:function(e){return t.unblockContact(t.buddy)}}},[a("i",{staticClass:"fa fa-ban"})])]):t._e()]),t.messages?a("div",{staticClass:"messages"},[a("ul",{directives:[{name:"chat-scroll",rawName:"v-chat-scroll",value:{enable:!0},expression:"{ enable: true }"}]},t._l(t.messages,(function(e){return a("li",{key:e.key,class:"animate__animated animate__faster "+e.direction+" "+t.directionAnimation[e.direction]},["sent"==e.direction?a("span",[a("img",{attrs:{src:t.user.data.photoURL,alt:""}})]):t._e(),"replied"==e.direction?a("span",[a("img",{attrs:{src:t.buddy.photoURL,alt:""}})]):t._e(),a("p",[t._v(" "+t._s(e.message)+" "),a("br"),a("small",{staticClass:"time-ago"},[a("time-ago",{attrs:{refresh:60,datetime:e.when,locale:"en",tooltip:""}})],1)])])})),0)]):t._e(),a("div",{staticClass:"message-input"},[a("div",{staticClass:"wrap"},[a("form",{staticStyle:{height:"100%"},on:{submit:t.sendMessage}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newMessage.body,expression:"newMessage.body"}],attrs:{type:"text",placeholder:"Write your message...",required:""},domProps:{value:t.newMessage.body},on:{input:function(e){e.target.composing||t.$set(t.newMessage,"body",e.target.value)}}}),a("i",{staticClass:"fa fa-paperclip attachment",attrs:{"aria-hidden":"true"}}),t._m(0)])])])]):t._e()},D=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"submit",attrs:{type:"submit"}},[a("i",{staticClass:"fa fa-paper-plane",attrs:{"aria-hidden":"true"}})])}],O=a("1da1"),T=a("5530"),A=(a("498a"),a("96cf"),a("e3d7")),I=a("2591"),B=a("2f62"),V={name:"ChatWindow",components:{TimeAgo:A["TimeAgo"]},data:function(){return{newMessage:{},active:!1,directionAnimation:{replied:"animate__backInRight",sent:"animate__backInLeft",buddy:{}}}},mounted:function(){var t=this;Rt.$on("buddySelected",(function(e){try{t.buddy=e,t.active=!0,t.refreshBuddyMessages(t.buddy)}catch(a){console.log(a)}}))},methods:Object(T["a"])({dispatchMessage:function(t,e,a){var s=this;return Object(O["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o={message:s.newMessage.body,direction:a,when:Date.now()},n.next=3,I["a"].database().ref("chats/"+t+"/"+e+"/messages/").push(o).then((function(){})).catch((function(t){s.$toasted.error(t.message).goAway(3e3)}));case 3:case"end":return n.stop()}}),n)})))()},sendMessage:function(){var t=this;""!==this.newMessage.body.trim()?this.dispatchMessage(this.user.data.uid,this.buddy.uid,"replied").then((function(){t.dispatchMessage(t.buddy.uid,t.user.data.uid,"sent").then((function(){t.newMessage.body=""}))})):this.$toasted.error("Cant't send an empty message").goAway(3e3)},blockContact:function(t){var e=this;I["a"].database().ref("blockedcontacts/"+this.user.data.uid+"/"+t.uid).set({blocked:!0}).then((function(){Rt.$emit("refreshAllContacts",t),e.$toasted.success("You have just blocked "+t.displayName+". You will not be visible to this contact.<br> Go to blocked contacts to unblock.").goAway(5e3)}))},unblockContact:function(t){var e=this;I["a"].database().ref("blockedcontacts/"+this.user.data.uid+"/"+t.uid).set({blocked:!1}).then((function(){Rt.$emit("refreshAllContacts",t),e.$toasted.info("You have unblocked "+t.displayName+". <br> Contact can now see and interact with you.").goAway(5e3)}))}},Object(B["b"])(["refreshBuddyMessages"])),computed:Object(T["a"])({},Object(B["c"])({user:"user",messages:"buddyMessages"}))},j=V,L=Object(l["a"])(j,x,D,!1,null,null,null),R=L.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"sidepanel"}},[a("div",{attrs:{id:"profile"}},[t.user.loggedIn?a("div",{staticClass:"wrap d-flex"},[a("div",{staticClass:"profile-img",staticStyle:{"margin-right":"0.7rem"}},[a("img",{staticClass:"online",class:t.user.data.status,staticStyle:{background:"#fff"},attrs:{id:"profile-img",src:t.user.data.photoURL,alt:""}})]),a("div",{staticClass:"profil-info"},[a("h6",{staticStyle:{color:"#fff",padding:"0px"}},[t._v(t._s(t.user.data.displayName))]),a("h6",[a("small",{staticStyle:{color:"#fff"}},[t._v(t._s(t.user.data.email))])])])]):t._e()]),a("div",{attrs:{id:"search"}},[t._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchString,expression:"searchString"}],attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.searchString},on:{input:function(e){e.target.composing||(t.searchString=e.target.value)}}})]),a("div",{attrs:{id:"contacts"}},[a("ul",{staticStyle:{"list-style":"none",width:"100%",margin:"0","padding-left":"0%",color:"#fff"}},t._l(t.filteredContacts,(function(e){return a("li",{key:e.uid,staticClass:"contact",class:{active:t.selectedId===e.uid},staticStyle:{"border-bottom":"#32465a 1px solid"},attrs:{title:e.displayName},on:{click:function(a){return t.setCurrentChatBuddy(e)}}},[a("div",{staticClass:"wrap"},[a("span",{class:"contact-status "+e.status}),a("img",{staticStyle:{background:"#fff"},attrs:{src:e.photoURL,alt:""}}),a("div",{staticClass:"meta"},[a("h6",{staticClass:"name",staticStyle:{color:"#fff"}},[t._v(" "+t._s(e.displayName)+" ")]),a("p",{staticClass:"preview"},[t._v(t._s(e.status))])])])])})),0)]),a("div",{attrs:{id:"bottom-bar"}},[t.blockedView?t._e():a("button",{attrs:{id:"settings",title:"Blocked Contacts"},on:{click:function(e){return t.toggleBlockedView()}}},[a("i",{staticClass:"fa fa-ban fa-fw",attrs:{"aria-hidden":"true"}}),t._v(" "),a("span",[t._v("Blocked")])]),t.blockedView?a("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",value:"Contacts",expression:"'Contacts'",modifiers:{hover:!0,right:!0}}],attrs:{id:"settings"},on:{click:function(e){return t.toggleBlockedView()}}},[a("i",{staticClass:"fa fa-users fa-fw",attrs:{"aria-hidden":"true"}}),a("span",[t._v("Contacts")])]):t._e(),a("button",{attrs:{id:"settings"}},[a("i",{staticClass:"fa fa-arrow-left fa-fw",attrs:{"aria-hidden":"true"}}),a("span",[a("a",{on:{click:t.logout}},[t._v("Logout")])])])])])},N=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:""}},[a("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}})])}],P=(a("ac1f"),a("5319"),a("4de4"),a("260b")),G={name:"UsersList",props:{},data:function(){return{formValue:{},status:!0,selectedId:String,placeholder:"Search contacts...",searchString:"",buddy:{},contactsSegregated:{blocked:[],unblocked:[]},blockedView:!1,isBlockedContact:null}},methods:{setCurrentChatBuddy:function(t){this.selectedId!==this.buddy.uid&&(this.selectedId=t.uid,this.$store.commit("SET_BUDDY",t),Rt.$emit("buddySelected",t)),this.selectedId=t.uid,Rt.$emit("buddySelected",t)},toggleBlockedView:function(){this.blockedView=!this.blockedView},logout:function(){var t=this;P["a"].database().ref("accounts/"+this.user.data.uid).update({status:"offline",lastSeen:P["a"].firestore.Timestamp.fromDate(new Date).toDate()}).then((function(){P["a"].auth().signOut().then((function(){t.$store.dispatch("authCheck").then((function(){t.$router.replace({name:"Home"})}))}))})).catch((function(t){console.log(t)}))}},computed:Object(T["a"])(Object(T["a"])({},Object(B["c"])({user:"user",contacts:"contacts"})),{},{filteredContacts:function(){var t;t=this.blockedView?this.contacts.blocked:this.contacts.unblocked;var e=this.searchString;return e?(e=e.trim().toLowerCase(),t=t.filter((function(t){if(-1!==t.displayName.toLowerCase().indexOf(e))return t})),t):t}}),created:function(){var t=this;this.setCurrentChatBuddy(this.buddy),Rt.$on("refreshAllContacts",(function(e){t.setCurrentChatBuddy(e),t.$store.dispatch("myHaters"),t.$store.dispatch("myBlockedUsers"),t.$store.dispatch("refreshUsers"),t.$store.getters.contacts}))},mounted:function(){this.$store.dispatch("refreshUsers"),this.$store.dispatch("myBlockedUsers"),this.$store.dispatch("refreshUsers"),this.$store.getters.contacts}},Y=G,F=Object(l["a"])(Y,M,N,!1,null,null,null),q=F.exports,H={name:"Chat",components:{ChatWindow:R,UsersList:q,BackgroundEffects:w}},W=H,K=Object(l["a"])(W,U,$,!1,null,null,null),z=K.exports,J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("BackgroundEffects"),a("div",{staticClass:"auth-page",attrs:{id:"frame"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"row no-gutter"},[t._m(0),a("div",{staticClass:"col-lg-7 pane"},[a("div",{staticClass:"login d-flex align-items-center py-5"},[a("div",{staticClass:"container"},[a("div",{staticClass:"col-lg-10 col-xl-7 mx-auto"},[t.loginView?a("div",{staticClass:"login"},[a("Login"),t._v(" Dont have an account? "),a("a",{staticClass:"text-primary",attrs:{href:"#"},on:{click:function(e){t.loginView=!t.loginView}}},[t._v("Register")])],1):t._e(),t.loginView?t._e():a("div",{staticClass:"register mb-2"},[a("Register"),t._v(" Already a member? "),a("a",{staticClass:"text-primary",attrs:{href:"#"},on:{click:function(e){t.loginView=!t.loginView}}},[t._v("Sign In")])],1),a("div",{staticStyle:{margin:"2em auto"}},[a("router-link",{staticClass:"text-primary",attrs:{to:"/home"}},[a("i",{staticClass:"fa fa-arrow-left"}),t._v(" Home")])],1)])])])])])])])],1)},Q=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-lg-5 col-lg-4 bg-image d-lg-block d-sm-none d-none"},[s("img",{attrs:{src:a("da67"),alt:"Login"}})])}],X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",{staticClass:"display-4"},[t._v("Come in!")]),a("p",{staticClass:"text-muted mb-1"},[t._v("Please login to chat with members")]),a("Auth0"),a("FormulateForm",{on:{submit:t.login},model:{value:t.formValues,callback:function(e){t.formValues=e},expression:"formValues"}},[a("div",{staticClass:"mb-2"},[a("FormulateInput",{attrs:{name:"email",type:"email",label:"",validation:"bail|required|email",placeholder:"Email address"}})],1),a("div",{staticClass:"mb-2"},[a("FormulateInput",{attrs:{name:"password",type:"password",label:"",validation:"required",placeholder:"Password"}})],1),a("div",{staticClass:"mb-1"},[a("FormulateInput",{attrs:{type:"submit",label:"Sign In"}})],1)])],1)},Z=[],tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"auth0 mb-1"},[a("a",{attrs:{href:"#"},on:{click:function(e){return t.loginWithGoogle()}}},[a("i",{staticClass:"fa fa-google"}),t._v(" Login with google")])])},et=[],at={name:"Auth0",methods:{loginWithGoogle:function(){var t=this,e=new I["a"].auth.GoogleAuthProvider;I["a"].auth().signInWithPopup(e).then((function(e){var a=e.user,s={userid:a.uid,email:a.email,displayName:a.displayName,createdAt:Date.now(),lastSeen:Date.now(),photoURL:"https://cdn0.iconfinder.com/data/icons/multimedia-solid-30px/30/user_account_profile-512.png",status:"online"};I["a"].database().ref("accounts/"+a.uid).set(s).then((function(){t.$toasted.success("Thanks for signing up! Please wait to enter chat room.").goAway(5e3),t.$router.replace({name:"Chat"})})).catch((function(e){t.$toasted.show(e.message).goAway(5e3)}))})).catch((function(e){console.log(e),t.$toasted.error(e.message).goAway(5e3)}))}},created:function(){}},st=at,nt=Object(l["a"])(st,tt,et,!1,null,null,null),ot=nt.exports,it={name:"Login",data:function(){return{formValues:{}}},components:{Auth0:ot},methods:{login:function(){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,I["a"].auth().signInWithEmailAndPassword(t.formValues.email,t.formValues.password).then((function(){t.$toasted.success("Please wait to enter chat room.").goAway(5e3),t.$router.push({name:"Home"})})).catch((function(e){console.log(e),t.$toasted.error(e.message).goAway(5e3)}));case 2:case"end":return e.stop()}}),e)})))()}}},rt=it,ct=Object(l["a"])(rt,X,Z,!1,null,null,null),ut=ct.exports,lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",{staticClass:"display-4"},[t._v("Sign Up!!")]),a("p",{staticClass:"text-muted mb-2"},[t._v("You can also register to get started.")]),a("FormulateForm",{on:{submit:t.signup},model:{value:t.formValues,callback:function(e){t.formValues=e},expression:"formValues"}},[a("div",{staticClass:"mb-2"},[a("FormulateInput",{attrs:{name:"email",type:"email",label:"",validation:"bail|required|email",placeholder:"Email address"}})],1),a("div",{staticClass:"mb-2"},[a("FormulateInput",{attrs:{name:"username",type:"text",label:"",validation:"required",placeholder:"Username"}})],1),a("div",{staticClass:"mb-2"},[a("FormulateInput",{attrs:{name:"password",type:"password",label:"",validation:"bail|required|min:6",placeholder:"Password"}})],1),a("div",{staticClass:"mb-1"},[a("FormulateInput",{attrs:{type:"submit",label:"Sign Up"}})],1)])],1)},dt=[],ft={name:"Register",data:function(){return{formValues:{},loading:!1}},methods:{signup:function(){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,I["a"].auth().createUserWithEmailAndPassword(t.formValues.email,t.formValues.password).then((function(){var e=I["a"].auth().currentUser,a={userid:e.uid,email:t.formValues.email,displayName:t.formValues.username,createdAt:Date.now(),lastSeen:Date.now(),photoURL:"https://cdn0.iconfinder.com/data/icons/multimedia-solid-30px/30/user_account_profile-512.png",status:"online"};I["a"].database().ref("accounts/"+e.uid).set(a).then((function(){I["a"].auth().signInWithEmailAndPassword(t.formValues.email,t.formValues.password).then((function(){t.$toasted.success("Thanks for signing up! Please wait to enter chat room.").goAway(5e3),t.$router.replace({name:"Chat"})})).catch((function(e){t.$toasted.show(e.message).goAway(5e3)}))}))})).catch((function(e){t.$toasted.info(e.message).goAway(5e3)}));case 2:case"end":return e.stop()}}),e)})))()}}},mt=ft,ht=Object(l["a"])(mt,lt,dt,!1,null,null,null),pt=ht.exports,gt={name:"Auth",components:{Login:ut,Register:pt,BackgroundEffects:w},data:function(){return{loginView:!0}},mounted:function(){"reg"===this.$route.query.loginState&&(this.loginView=!1)},created:function(){var t=this;Rt.$on("loggedout",(function(){t.$store.dispatch("logout"),t.$router.replace({name:"Home"})}))}},bt=gt,vt=(a("29c9"),Object(l["a"])(bt,J,Q,!1,null,null,null)),_t=vt.exports,yt={name:"Logout",mounted:function(){this.$store.dispatch("logout"),this.$router.replace({name:"Home"})}},wt=yt,St=Object(l["a"])(wt,s,n,!1,null,null,null),Ct=St.exports,kt=(a("159b"),a("caad"),a("2532"),a("0e44"));o["a"].use(B["a"]);var Et=new B["a"].Store({namespaced:!0,plugins:[Object(kt["a"])()],state:{user:{loggedIn:!1,data:null},buddy:null,uid:String,users:null,blockedUsers:null,buddyMessages:null,haters:null,contactsSegregated:{blocked:[],unblocked:[]}},getters:{user:function(t){return t.user},buddy:function(t){return t.buddy},contacts:function(t){var e=[];t.users.forEach((function(a){t.haters.includes(a.uid)?console.log(a.displayName+" has blocked me"):e.push(a)}));var a=[],s=[];return e.forEach((function(e){t.blockedUsers.includes(e.uid)?(e.blocked=!0,a.push(e)):(e.blocked=!1,s.push(e))})),t.contactsSegregated.blocked=a,t.contactsSegregated.unblocked=s,t.contactsSegregated},blockedContacts:function(t){return t.blockedUsers},buddyMessages:function(t){return t.buddyMessages},uid:function(t){return t.uid},haters:function(t){return t.haters}},mutations:{SET_LOGGED_IN:function(t,e){t.user.loggedIn=e},SET_USER:function(t,e){t.user.data=e},SET_BUDDY:function(t,e){t.buddy=e},SET_UID:function(t,e){t.uid=e},SET_USERS:function(t,e){t.users=e},SET_BUDDY_MESSAGES:function(t,e){t.buddyMessages=e},SET_BLOCKED:function(t,e){t.blockedUsers=e},SET_HATERS:function(t,e){t.haters=e}},actions:{setBuddy:function(t,e){var a=t.commit;a("SET_BUDDY",e)},myBlockedUsers:function(t){var e=t.commit,a=t.state;I["a"].database().ref("blockedcontacts/"+a.user.data.uid).on("value",(function(t){var a=[],s=t.val();for(var n in s)1==s[n].blocked&&a.push(n);e("SET_BLOCKED",a)}))},myHaters:function(t){var e=t.state,a=t.commit;I["a"].database().ref("blockedcontacts/").on("value",(function(t){var s=[],n=t.val(),o=e.uid;for(var i in n)i!==o&&n[i][o].blocked&&s.push(i);a("SET_HATERS",s)}))},refreshBuddyMessages:function(t,e){var a=t.commit,s=t.state;I["a"].database().ref("chats/"+s.user.data.uid+"/"+e.uid+"/messages").on("value",(function(t){var e=[],s=t.val();for(var n in s){var o=s[n];o.key=n,e.push(o)}a("SET_BUDDY_MESSAGES",e)}))},refreshUsers:function(t){var e=t.commit,a=t.state;I["a"].database().ref("accounts/").orderByChild("displayName").on("value",(function(t){var s=[];t.forEach((function(t){var e=t.val(),n={uid:e.userid,displayName:e.displayName,photoURL:e.photoURL,status:e.status};n.uid!==a.user.data.uid&&s.push(n)})),e("SET_USERS",s)}))},authCheck:function(t){var e=t.commit,a=t.dispatch;I["a"].auth().onAuthStateChanged((function(t){e("SET_LOGGED_IN",!1),e("SET_UID",null),e("SET_USERS",null),e("SET_BUDDY_MESSAGES",null),t?(e("SET_LOGGED_IN",!0),e("SET_UID",t.uid),I["a"].database().ref("accounts/"+t.uid).on("value",(function(a){var s=a.val(),n={uid:t.uid,displayName:s.displayName,email:s.email,photoURL:s.photoURL,status:s.status};e("SET_USER",n)})),a("updateUserStatus",{status:"online",lastSeen:I["a"].firestore.Timestamp.fromDate(new Date).toDate()})):(a("updateUserStatus",{status:"offline",lastSeen:I["a"].firestore.Timestamp.fromDate(new Date).toDate()}),e("SET_LOGGED_IN",!1),e("SET_USER",null),e("SET_BUDDY",null),e("SET_UID",null),e("SET_USERS",null),e("SET_BUDDY_MESSAGES",null))}))},updateUserStatus:function(t,e){var a=t.state;I["a"].database().ref("accounts/"+a.user.data.uid).update(e)},logout:function(t){var e=t.commit;I["a"].auth().signOut().then((function(){e("SET_LOGGED_IN",!1),e("SET_USER",null),e("SET_BUDDY",null),e("SET_UID",null),e("SET_USERS",null),e("SET_BUDDY_MESSAGES",null),console.log("Successfully signed out.")}))}}});o["a"].use(m["a"]);var Ut=[{path:"*",redirect:"/home"},{path:"/home",name:"Home",component:E,beforeEnter:function(t,e,a){!1===Et.getters.user.loggedIn?a():a("/")}},{path:"/about",name:"About",component:function(){return a.e("about").then(a.bind(null,"f820"))}},{path:"/",name:"Chat",component:z,beforeEnter:function(t,e,a){!1===Et.getters.user.loggedIn?a("/home"):a()}},{path:"/logout",name:"Logout",component:Ct,beforeEnter:function(t,e,a){!1===Et.getters.user.loggedIn?a("/home"):a()}},{path:"/auth",name:"Auth",component:_t,beforeEnter:function(t,e,a){!1===Et.getters.user.loggedIn?a():a("/")}},{path:"*",component:function(){return a.e("chunk-3cdec8e8").then(a.bind(null,"4cda"))}}];"ssr"!==Object({NODE_ENV:"production",BASE_URL:"/"}).MODE&&Ut.push({path:"*",component:function(){return a.e("chunk-3cdec8e8").then(a.bind(null,"4cda"))}});var $t=new m["a"]({routes:Ut}),xt=$t,Dt=a("a65d"),Ot=a.n(Dt),Tt=a("d644"),At=a("9990"),It=a.n(At),Bt={apiKey:"AIzaSyBfZEc_oTE_UwuCqpmYfVUSOI8o7yESN74",authDomain:"firechat-vue-a7c81.firebaseapp.com",databaseURL:"https://firechat-vue-a7c81-default-rtdb.firebaseio.com",projectId:"firechat-vue-a7c81",storageBucket:"firechat-vue-a7c81.appspot.com",messagingSenderId:"445246760927",appId:"1:445246760927:web:ced083aa8efbdb68f6c66a"},Vt=Bt,jt={className:"warning",position:"top-right",singleton:!0,action:{text:"Ok",onClick:function(t,e){e.goAway(0)}}},Lt=jt,Rt=(a("77ed"),a("ae01"),new o["a"]);I["a"].initializeApp(Vt),o["a"].use(It.a),o["a"].use(Ot.a,Lt),o["a"].use(Tt["a"]),o["a"].config.productionTip=!1,new o["a"]({router:xt,store:Et,render:function(t){return t(f)}}).$mount("#app")},"5ced":function(t,e,a){},"65e5":function(t,e,a){},"85ec":function(t,e,a){},"973c":function(t,e,a){},ae01:function(t,e,a){},b1bf:function(t,e,a){},cccb:function(t,e,a){"use strict";a("5ced")},da67:function(t,e,a){t.exports=a.p+"img/undrawPride.d7fba49b.svg"}});
//# sourceMappingURL=app.e8cffd58.js.map